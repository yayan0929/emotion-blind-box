# 网站快速部署指南

## 概述
本指南将帮助您将"大学生情绪盲盒交换站"部署到线上，让所有人都能访问。

## 方案一：快速部署（推荐新手）

### 步骤1：部署后端到Render
1. 访问：https://render.com
2. 注册/登录账户（推荐使用GitHub账号）
3. 点击"New+" → "Web Service"
4. 选择"Connect a repository"或直接上传代码
5. 配置服务：
   - Name: `emotion-blind-box-api`
   - Environment: `Node`
   - Root Directory: `server`
   - Build Command: `npm run build`
   - Start Command: `npm start`
   - Instance Type: `Free`
6. 添加环境变量：
   - `NODE_ENV`: `production`
   - `JWT_SECRET`: `emotion-blind-box-jwt-secret-key-2023`
   - `JWT_REFRESH_SECRET`: `emotion-blind-box-refresh-secret-key-2023`
   - `JWT_EXPIRES_IN`: `7d`
   - `JWT_REFRESH_EXPIRES_IN`: `30d`
7. 点击"Create Web Service"
8. 等待部署完成，记下API地址

### 步骤2：部署前端到Netlify
1. 访问：https://app.netlify.com/drop
2. 打开项目文件夹，将 `client/dist` 文件夹拖拽到页面中
3. 等待部署完成
4. 记下网站地址

### 步骤3：连接前后端（如果需要）
1. 如果前端API地址与后端不匹配，修改 `client/src/services/api.ts`
2. 重新构建并部署前端

### 步骤4：测试网站
1. 访问Netlify提供的网站地址
2. 测试注册功能
3. 使用管理员账号测试：
   - 用户名：13800000000
   - 密码：admin123

## 方案二：自动化部署（适合开发者）

### 前置条件：代码已推送到GitHub

1. 在项目根目录运行：
   ```bash
   git init
   git add .
   git commit -m "初始化项目"
   git branch -M main
   git remote add origin [您的GitHub仓库地址]
   git push -u origin main
   ```

2. 部署到Render：
   - 运行：`一键部署到Render.bat`
   - 按照脚本提示完成部署

3. 部署到Netlify：
   - 运行：`部署到Netlify.bat`
   - 或直接拖拽 `client/dist` 到 https://app.netlify.com/drop

## 注意事项

1. **后端API地址**：
   - Render提供的地址通常为：`https://您的服务名.onrender.com`
   - API路径为：`https://您的服务名.onrender.com/api`

2. **环境变量**：
   - 确保在Render中正确配置所有必需的环境变量
   - JWT密钥可以自定义，但必须设置

3. **域名**：
   - Netlify提供的临时域名可以永久使用
   - Render免费计划会在15分钟后进入休眠，首次访问可能需要等待

4. **数据持久化**：
   - Render免费计划使用SQLite，重启后数据会丢失
   - 考虑升级到付费计划或添加PostgreSQL数据库以保持数据

## 完成后

1. 您的网站将可通过Netlify提供的地址访问
2. 后端API运行在Render上
3. 所有人都可以注册账号并使用功能

## 获取帮助

如果遇到问题，可以：
1. 查看项目中的各种部署指南文件
2. 检查Render和Netlify的部署日志
3. 确保所有环境变量正确配置

祝您部署成功！