# æœ€ç»ˆéƒ¨ç½²æŒ‡å— - å¤§å­¦ç”Ÿæƒ…ç»ªç›²ç›’äº¤æ¢ç«™

## å‰ç½®æ¡ä»¶å·²å®Œæˆ

âœ… æ•°æ®åº“å·²ä»SQLiteæ”¹ä¸ºPostgreSQL
âœ… æ„å»ºè„šæœ¬å·²ä¿®å¤ï¼ˆè·³è¿‡TypeScripté”™è¯¯ï¼‰
âœ… ä»£ç å·²æ¨é€åˆ°GitHub

## ç°åœ¨è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤éƒ¨ç½²

### 1. åˆ›å»ºPostgreSQLæ•°æ®åº“

1. ç™»å½• https://render.com
2. ç‚¹å‡» "New +" â†’ "PostgreSQL"
3. è®¾ç½®å‚æ•°ï¼š
   - åç§°ï¼š`emotion-box-db`
   - é€‰æ‹©å…è´¹å¥—é¤
4. ç‚¹å‡» "Create Database"
5. ç­‰å¾…åˆ›å»ºå®Œæˆï¼Œç„¶åå¤åˆ¶ **External Database URL**

### 2. åˆ›å»ºåç«¯æœåŠ¡

1. åœ¨Renderä¸­ç‚¹å‡» "New +" â†’ "Web Service"
2. è¿æ¥åˆ°æ‚¨çš„GitHubä»“åº“ï¼š`yayan0929/emotion-blind-box`
3. è®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š
   - **åç§°**ï¼š`emotion-box-api`
   - **æ ¹ç›®å½•**ï¼š`server`
   - **æ„å»ºå‘½ä»¤**ï¼š`npm install && npm run build`
   - **å¯åŠ¨å‘½ä»¤**ï¼š`npm start`
   - **å®ä¾‹ç±»å‹**ï¼šFree

4. ç‚¹å‡» "Advanced Settings"ï¼Œæ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
   ```
   DATABASE_URL = [ä»PostgreSQLé¡µé¢å¤åˆ¶çš„External Database URL]
   JWT_SECRET = emotion-blind-box-jwt-secret-key-change-in-production-2023
   JWT_REFRESH_SECRET = emotion-blind-box-refresh-secret-key-change-in-production-2023
   NODE_ENV = production
   PORT = 3001
   ```

5. ç‚¹å‡» "Create Web Service" å¼€å§‹éƒ¨ç½²

### 3. éƒ¨ç½²å‰ç«¯

1. æ„å»ºå‰ç«¯ï¼ˆåœ¨æœ¬åœ°æ‰§è¡Œï¼‰ï¼š
   ```
   cd c:/Users/HP/CodeBuddy/239025009/client
   npm run build
   ```

2. éƒ¨ç½²åˆ°Netlifyï¼š
   - è®¿é—®ï¼šhttps://app.netlify.com/drop
   - å°† `client/dist` æ–‡ä»¶å¤¹æ‹–æ‹½åˆ°é¡µé¢ä¸­
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œè®°å½•URL

### 4. æ›´æ–°CORSè®¾ç½®

1. è¿”å›Renderæ§åˆ¶å°
2. æ‰¾åˆ°æ‚¨çš„åç«¯æœåŠ¡ï¼ˆ`emotion-box-api`ï¼‰
3. ç‚¹å‡» "Environment" é€‰é¡¹å¡
4. æ·»åŠ æˆ–æ›´æ–°ç¯å¢ƒå˜é‡ï¼š
   ```
   FRONTEND_URL = https://[æ‚¨çš„NetlifyåŸŸå].netlify.app
   ```
5. ç‚¹å‡» "Save Changes"
6. ç‚¹å‡» "Manual Deploy" â†’ "Deploy Latest Commit" é‡æ–°éƒ¨ç½²

### 5. æµ‹è¯•ç½‘ç«™

1. è®¿é—®æ‚¨çš„Netlifyç½‘ç«™
2. æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š
   - æ³¨å†Œæ–°ç”¨æˆ·
   - ç™»å½•
   - åˆ›å»ºæƒ…ç»ªç›²ç›’
   - æµè§ˆç›²ç›’
   - å›å¤ç›²ç›’

## æ•…éšœæ’é™¤

### å¦‚æœåç«¯éƒ¨ç½²å¤±è´¥

1. æ£€æŸ¥Renderæ§åˆ¶å°çš„ "Logs" é€‰é¡¹å¡
2. å¸¸è§é—®é¢˜ï¼š
   - æ•°æ®åº“è¿æ¥é”™è¯¯ï¼šæ£€æŸ¥DATABASE_URLæ ¼å¼
   - ç«¯å£é”™è¯¯ï¼šç¡®ä¿PORT=3001
   - æ¨¡å—é”™è¯¯ï¼šé‡æ–°éƒ¨ç½²

### å¦‚æœå‰ç«¯æ— æ³•è¿æ¥åç«¯

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
2. ç¡®è®¤API URLæ˜¯å¦æ­£ç¡®ï¼ˆåº”è¯¥ä»¥æ‚¨çš„RenderæœåŠ¡URLç»“å°¾ï¼‰
3. ç¡®è®¤CORSè®¾ç½®æ˜¯å¦åŒ…å«æ‚¨çš„NetlifyåŸŸå

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æ„å»ºå‰ç«¯
cd client && npm run build

# æœ¬åœ°æµ‹è¯•åç«¯
cd server && npm start

# æäº¤ä»£ç 
git add .
git commit -m "æ›´æ–°"
git push origin HEAD:main
```

## å®Œæˆéƒ¨ç½²å

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯å…¬å¼€è®¿é—®çš„æƒ…ç»ªç›²ç›’äº¤æ¢ç«™ï¼å…¶ä»–äººå¯ä»¥ï¼š

1. æ³¨å†Œè´¦å·å¹¶åˆ†äº«è‡ªå·±çš„æƒ…ç»ª
2. æµè§ˆå…¶ä»–äººçš„æƒ…ç»ªç›²ç›’
3. æä¾›æ”¯æŒå’Œé¼“åŠ±
4. å»ºç«‹æƒ…æ„Ÿè¿æ¥

æ­å–œæ‚¨çš„æƒ…ç»ªç›²ç›’äº¤æ¢ç«™æˆåŠŸä¸Šçº¿ï¼ğŸ‰